<mat-card *ngIf="user" class="card">
  <mat-card-header>
    <div mat-card-avatar>
      <img [src]="user.picture.thumbnail" />
    </div>
    <mat-card-title
      >{{ user.name.title }} {{ user.name.first }}
      {{ user.name.last }}</mat-card-title
    >
    <mat-card-subtitle>{{ user.gender }}</mat-card-subtitle>
    <mat-card-subtitle>{{ user.email }}</mat-card-subtitle>
  </mat-card-header>
  <picture mat-card-image>
    <app-map [position]="user.location.coordinates"></app-map>
  </picture>
  <mat-card-content>
    <app-weather *ngIf="weather" [weather]="weather"></app-weather>
    <mat-progress-bar
      *ngIf="weatherLoading"
      mode="indeterminate"
    ></mat-progress-bar>
  </mat-card-content>
  <ng-container *ngIf="!user?._id">
    <mat-card-actions>
      <button mat-button (click)="saveUser(user)">Save</button>
    </mat-card-actions>
    <mat-card-footer>
      <mat-progress-bar
        *ngIf="inProgress"
        mode="indeterminate"
      ></mat-progress-bar>
    </mat-card-footer>
  </ng-container>
</mat-card>
